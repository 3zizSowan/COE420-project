<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Properties - PropManager</title>
    <link rel="stylesheet" href="/CSS/properties.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav style="height: 90px;" class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="dashboard.html">
                <img src="/images/PropManager_Logo_NoBckg.png" alt="Logo">
                <span>PropManager</span>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav d-flex justify-content-evenly w-100">
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="properties.html">PROPERTIES</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="occupants.html">OCCUPANCY INFO</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="documents.html">DOCUMENTS</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="income.html">TRACK INCOME</a>
                    </li>
                </ul>
            </div>
            <a href="landing.html" class="btn btn-link" id="logoutButton" aria-label="Logout">
                <button class="btn btn-link" id="logoutButton" aria-label="Logout"">
                    <i class="fas fa-sign-out-alt" style="font-size: 24px; color: rgb(0, 47, 108);"></i>
                </button>
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid properties-container">
        <!-- Properties Overview -->
        <div class="row mt-4">
            <div class="col-md-4">
                <div class="property-stat-card">
                    <i class="fas fa-building"></i>
                    <h3>Total Properties</h3>
                    <p class="number">12</p>
                    <p class="status">Active Management</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="property-stat-card">
                    <i class="fas fa-home"></i>
                    <h3>Occupied Units</h3>
                    <p class="number">43</p>
                    <p class="status">95% Occupancy Rate</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="property-stat-card">
                    <i class="fas fa-door-open"></i>
                    <h3>Vacant Units</h3>
                    <p class="number">2</p>
                    <p class="status">Available for Rent</p>
                </div>
            </div>
        </div>

        <!-- Properties Management Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="properties-management-card">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h3>Property Management</h3>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addPropertyModal">
                            <i class="fas fa-plus"></i> Add New Property
                        </button>
                    </div>

                    <!-- Properties Grid -->
                    <div class="row g-4">
                        <!-- Property Card 1 -->
                        <div class="col-lg-4 col-md-6">
                            <div class="property-card">
                                <div class="property-image">
                                    <img src="/images/Villa1_Slideshow.webp" alt="123 Main Street">
                                    <span class="status-badge fully-occupied">Fully Occupied</span>
                                </div>
                                <div class="property-details">
                                    <h4>123 Main Street</h4>
                                    <div class="property-info">
                                        <div class="info-item">
                                            <i class="fas fa-door-closed"></i>
                                            <span>12 Units</span>
                                        </div>
                                        <div class="info-item">
                                            <i class="fas fa-user-check"></i>
                                            <span>100% Occupied</span>
                                        </div>
                                        <div class="info-item">
                                            <i class="fas fa-dollar-sign"></i>
                                            <span>$15,000/month</span>
                                        </div>
                                    </div>
                                    <div class="property-actions mt-3">
                                        <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#viewOccupantsModal" data-property-id="1">
                                            <i class="fas fa-users"></i> View Occupants
                                        </button>
                                        <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#viewDocumentsModal" data-property-id="1">
                                            <i class="fas fa-file-alt"></i> View Documents
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Property Card 2 -->
                        <div class="col-lg-4 col-md-6">
                            <div class="property-card">
                                <div class="property-image">
                                    <img src="/images/Villa2_Slideshow.jpg" alt="456 Oak Avenue">
                                    <span class="status-badge partially-vacant">1 Vacancy</span>
                                </div>
                                <div class="property-details">
                                    <h4>456 Oak Avenue</h4>
                                    <div class="property-info">
                                        <div class="info-item">
                                            <i class="fas fa-door-closed"></i>
                                            <span>8 Units</span>
                                        </div>
                                        <div class="info-item">
                                            <i class="fas fa-user-check"></i>
                                            <span>87.5% Occupied</span>
                                        </div>
                                        <div class="info-item">
                                            <i class="fas fa-dollar-sign"></i>
                                            <span>$10,500/month</span>
                                        </div>
                                    </div>
                                    <div class="property-actions mt-3">
                                        <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#viewOccupantsModal" data-property-id="2">
                                            <i class="fas fa-users"></i> View Occupants
                                        </button>
                                        <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#viewDocumentsModal" data-property-id="2">
                                            <i class="fas fa-file-alt"></i> View Documents
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Add more property cards as needed -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Property Modal -->
    <div class="modal fade" id="addPropertyModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Property</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addPropertyForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Property Name/Address</label>
                                    <input type="text" class="form-control" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Property Type</label>
                                    <select class="form-select" required>
                                        <option value="">Select type...</option>
                                        <option>Apartment</option>
                                        <option>House</option>
                                        <option>Commercial</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Number of Units</label>
                                    <input type="number" class="form-control" min="1" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Property Images</label>
                                    <input type="file" class="form-control" multiple accept="image/*">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Description</label>
                                    <textarea class="form-control" rows="4"></textarea>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveProperty">Save Property</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Occupants Modal -->
    <div class="modal fade" id="viewOccupantsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Occupants</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <ul class="list-group" id="occupantsList">
                        <!-- Occupants will be dynamically loaded here -->
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Documents Modal -->
    <div class="modal fade" id="viewDocumentsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Documents</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <ul class="list-group" id="documentsList">
                        <!-- Documents will be dynamically loaded here -->
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Sample data - In a real application, this would come from a database
            const properties = [
                { id: 1, name: '123 Main Street', occupants: [{ name: 'John Doe', unit: 'Apt 1A', email: 'john.doe@example.com' }], documents: [{ title: 'Lease Agreement', date: '2024-01-01', url: 'documents/lease_agreement.pdf' }] },
                { id: 2, name: '456 Oak Avenue', occupants: [{ name: 'Jane Smith', unit: 'Unit 2B', email: 'jane.smith@example.com' }], documents: [{ title: 'Insurance Document', date: '2024-02-01', url: 'documents/insurance_document.pdf' }] },
                // Add more properties as needed
            ];

            // Load occupants into the modal
            function loadOccupants(propertyId) {
                const property = properties.find(p => p.id == propertyId);
                const occupantsList = document.getElementById('occupantsList');
                occupantsList.innerHTML = property.occupants.map(occupant => `
                    <li class="list-group-item">
                        <strong>${occupant.name}</strong> - ${occupant.unit} - <a href="mailto:${occupant.email}">${occupant.email}</a>
                    </li>
                `).join('');
            }

            // Load documents into the modal
            function loadDocuments(propertyId) {
                const property = properties.find(p => p.id == propertyId);
                const documentsList = document.getElementById('documentsList');
                documentsList.innerHTML = property.documents.map(document => `
                    <li class="list-group-item">
                        <a href="${document.url}" target="_blank"><strong>${document.title}</strong></a> - Added on ${document.date}
                    </li>
                `).join('');
            }

            // Event listeners for modals
            document.querySelectorAll('[data-bs-target="#viewOccupantsModal"]').forEach(button => {
                button.addEventListener('click', function () {
                    const propertyId = this.getAttribute('data-property-id');
                    loadOccupants(propertyId);
                });
            });

            document.querySelectorAll('[data-bs-target="#viewDocumentsModal"]').forEach(button => {
                button.addEventListener('click', function () {
                    const propertyId = this.getAttribute('data-property-id');
                    loadDocuments(propertyId);
                });
            });
        });
    </script>
</body>
</html>